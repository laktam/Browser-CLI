(()=>{"use strict";async function e(){let[e]=await chrome.tabs.query({active:!0,currentWindow:!0});return console.log(e.id),e.id}function t(e,t){chrome.tabs.sendMessage(e,{action:t})}let n={};chrome.runtime.onMessage.addListener((function(t,n,a){return"command"===t.action&&(console.log(t.command),async function(t){const n=function(e){return e.split(" ")}(t);let a,o=n[0],c=n[1],r=await e();"ls"==o?a=await async function(){let e=await chrome.tabs.query({}),t=[];console.log(e);let n=1;for(let a of e){let e="("+n+") "+a.title+" : "+a.url;a.highlighted&&(e+=" *"),t.push(e),n++}return t}():"cd"==o?a=await async function(e){let t=await chrome.tabs.query({});chrome.tabs.update(t[Number.parseInt(e)-1].id,{active:!0})}(c):"rm"==o&&(a=await async function(e){let t=await chrome.tabs.query({});chrome.tabs.remove(t[Number.parseInt(e)-1].id)}(c)),chrome.tabs.sendMessage(r,{action:o,data:a})}(t.command),a()),!0})),chrome.commands.onCommand.addListener((function(a){return"open-terminal"===a&&e().then((e=>{console.log("open terminal command,  tabsWithOpenTerminal[id]:",n[e]),null==n[e]||0==n[e]?(n[e]=!0,t(e,"open-terminal")):!0===n[e]&&(n[e]=!1,t(e,"close-terminal"))})),!0}))})();