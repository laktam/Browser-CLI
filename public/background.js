(()=>{"use strict";async function e(){let[e]=await chrome.tabs.query({active:!0,currentWindow:!0});return console.log(e.id),e.id}function n(e,n){chrome.tabs.sendMessage(e,{action:n})}let t={};chrome.runtime.onMessage.addListener((function(n,t,o){return"command"===n.action&&(console.log(n.command),async function(n){const t=function(e){return e.split(" ")}(n);let o,a=t[0],c=t[1],i=await e();"ls"==a?o=await async function(){let e=await chrome.tabs.query({}),n=[];console.log(e);let t=1;for(let o of e){let e="("+t+") "+o.title+" : "+o.url;o.highlighted&&(e+=" *"),n.push(e),t++}return n}():"cd"==a&&(o=await async function(e){console.log("arg ",e);let n=await chrome.tabs.query({});chrome.tabs.update(n[Number.parseInt(e)-1].id,{active:!0})}(c)),chrome.tabs.sendMessage(i,{action:a,data:o})}(n.command),o()),!0})),chrome.commands.onCommand.addListener((function(o){return"open-terminal"===o&&e().then((e=>{console.log("open terminal command,  tabsWithOpenTerminal[id]:",t[e]),null==t[e]||0==t[e]?(t[e]=!0,n(e,"open-terminal")):!0===t[e]&&(t[e]=!1,n(e,"close-terminal"))})),!0}))})();