(()=>{"use strict";function e(e){chrome.tabs.query({active:!0,currentWindow:!0},(function(t){console.log(t),chrome.tabs.executeScript(t[0].id,{code:"document.readyState"},(function(n){n&&"complete"===n[0]&&(console.log("Document fully loaded in tab with ID: "+tabId),e.includes(t[0].id)||"complete"!==t[0].status||""===t[0].url||"chrome://newtab/"===t[0].url||(chrome.tabs.sendMessage(t[0].id,{action:"open-terminal"}),e.push(t[0].id)))}))}))}let t=!1,n=[];chrome.runtime.onMessage.addListener((function(e,t,n){return"getTabsInfo"===e.action?chrome.tabs.query({},(function(e){n(e)})):"command"===e.action&&(console.log(e.command),n()),!0})),chrome.commands.onCommand.addListener((function(o){return"open-terminal"===o&&(t?(t=!1,function(e){for(let t of e)chrome.tabs.sendMessage(t,{action:"close-terminal"});e.length=0}(n)):(t=!0,e(n))),!0})),chrome.tabs.onActivated.addListener((function(o){return t&&e(n),!0})),chrome.tabs.onUpdated.addListener((function(o,c,a){return"complete"===c.status&&t&&e(n),!0}))})();