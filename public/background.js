(()=>{"use strict";async function n(){let[n]=await chrome.tabs.query({active:!0,currentWindow:!0});return console.log(n.id),n.id}function e(n,e){chrome.tabs.sendMessage(n,{action:e})}let t={};chrome.runtime.onMessage.addListener((function(e,t,o){return"command"===e.action&&(console.log(e.command),function(n){n.split(" ")}(a=e.command),"ls"===a&&async function(){let n=await chrome.tabs.query({}),e=[];console.log(n);for(let t of n){let n=t.title+" : "+t.url;t.highlighted&&(n+=" *"),e.push(n)}return e}().then((e=>{n().then((n=>{chrome.tabs.sendMessage(n,{action:"ls",data:e})}))})),o()),!0;var a})),chrome.commands.onCommand.addListener((function(o){return"open-terminal"===o&&n().then((n=>{console.log("open terminal command,  tabsWithOpenTerminal[id]:",t[n]),null==t[n]||0==t[n]?(t[n]=!0,e(n,"open-terminal")):!0===t[n]&&(t[n]=!1,e(n,"close-terminal"))})),!0}))})();