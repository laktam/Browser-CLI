(()=>{"use strict";async function e(){let e=await chrome.tabs.query({}),n=[];console.log(e);let t=1;for(let a of e){let e="("+t+") "+a.title+" : "+a.url;a.highlighted&&(e+=" *"),n.push(e),t++}return n}async function n(){let[e]=await chrome.tabs.query({active:!0,currentWindow:!0});return console.log(e.id),e.id}function t(e,n){chrome.tabs.sendMessage(e,{action:n})}let a={};chrome.runtime.onMessage.addListener((function(t,a,o){return"command"===t.action&&(console.log(t.command),async function(t){const a=function(e){return e.split(" ")}(t);let o,c=a[0],i=a[1],r=await n();"ls"==c?o=await e():"cd"==c?o=await async function(e){let n=await chrome.tabs.query({});chrome.tabs.update(n[Number.parseInt(e)-1].id,{active:!0})}(i):"rm"==c?o=await async function(e){let n=await chrome.tabs.query({});chrome.tabs.remove(n[Number.parseInt(e)-1].id)}(i):"find"==c&&(o=await async function(n){n=n.slice(1,n.length-1),console.log("arg ",n);let t=await e();return t=t.filter((e=>e.includes(n))),console.log("found tabs ",t),t}(i)),chrome.tabs.sendMessage(r,{action:c,data:o})}(t.command),o()),!0})),chrome.commands.onCommand.addListener((function(e){return"open-terminal"===e&&n().then((e=>{console.log("open terminal command,  tabsWithOpenTerminal[id]:",a[e]),null==a[e]||0==a[e]?(a[e]=!0,t(e,"open-terminal")):!0===a[e]&&(a[e]=!1,t(e,"close-terminal"))})),!0}))})();