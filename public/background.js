(()=>{"use strict";function e(e){chrome.tabs.query({active:!0,currentWindow:!0},(function(n){console.log(n),e.includes(n[0].id)||"complete"!==n[0].status||""===n[0].url||"chrome://newtab/"===n[0].url||(chrome.tabs.sendMessage(n[0].id,{action:"open-terminal"}),e.push(n[0].id))}))}let n=!1,o=[];chrome.runtime.onMessage.addListener((function(t,c,a){return"getTabsInfo"===t.action?chrome.tabs.query({},(function(e){a(e)})):"command"===t.action?(console.log(t.command),a()):"after-loading"===t.action&&n&&e(o),!0})),chrome.commands.onCommand.addListener((function(t){return"open-terminal"===t&&(n?(n=!1,function(e){for(let n of e)chrome.tabs.sendMessage(n,{action:"close-terminal"});e.length=0}(o)):(n=!0,e(o))),!0})),chrome.tabs.onActivated.addListener((function(t){return n&&e(o),!0}))})();